% VMENU(1) Vmenu User Manuals
% Daniel Campoverde
% February 15, 2016

# NAME

vmenu - create x menus from the shell to run commands

# SYNOPSIS

vmenu [*OPTION*]... \<*MENUITEM*\> \<*COMMAND*\>...

vmenu [*OPTION*]... {**-d***::*|**--delimiter** *::*} *MENUITEM::COMMAND* ...

# DESCRIPTION

**Vmenu** is a simple program that accepts a list of MENUITEM and COMMAND pairs
on the command line. It creates a X window that consists of nothing but a menu.
When a particular MENUITEM is selected by the user, the corresponding COMMAND
is executed or (using *--print*) printed on standard output.

Menu items and commands may either be given separately using two arguments for
each menu option, or, optionally you may specify a delimiter (using
*--delimiter*) and specify both menu item and command in the same argument. The
delimiter may be of any length.

If the command is omitted (or if an empty command is supplied when not using
*--delimiter*) then the menu item text will be used as the command.

# OPTIONS

Some options may be specified using X resources, allowing you to define some
defaults you like in your in your *~/.Xresources* file.

**vmenu**'s default resource class is the name of the executed file, either
**vmenu** or, if the executable was called through a link, the name of the link
in question. The command line option *--class* may be used to override the
default X resource class name.


**--align** *{left|center|right}*  (X resource: **align**)
 :  Aligns the text of the menu entries to the **left**, **center** or
    **right**. Defaults to **left**. (Short options **-l**, **-c** and **-r**
    may also be used for **left**, **center** and **right** respectively.)


**-b**, **--back** *PREVMENU*
:   Run command PREVMENU when user goes back in the menu hierarchy. Useful when
    using nested menus; it gives the user a way to back out and return to the
    previous menu. Note that you can use this option for other things too. The
    command specified by the **--back** option is executed when the user hits
    one of the "back" keys.


**--background** *BGCOLOR*  (X resource: **background**)
:   Set the background color to BGCOLOR. By default, the background color is
    black. BGCOLOR may be the name of any color accepted by your X server.


**-C**, **--class** *CLASSNAME*
:   This option allows you to override **vmenu**'s resource class. Normally it
    is "vmenu".


**--debug**
:   Makes **vmenu** talk quite a lot on standard error.


**-d**, **--delimiter** *DELIM*
:   This changes the behaviour when parsing subsequent menuitem/command pairs.

    Normally the command line arguments are taken to be alternately menu items
    and their related commands, thus requiring an even number of arguments to be
    passed to **vmenu**. (If a command is given as "" it is taken to be the same
    as the menu item.) This behaviour can make it somewhat difficult to
    distinguish between menu item arguments and command arguments in cases where
    the menu grow quite big (e.g. in a script). Therefore an alternative is
    provided...

    If you specify a delimiter (using **--delimiter**) this behaviour is changed
    and the menu item and command are both expected to occur in the same
    argument, separated by whatever delimiter you've specified. This makes the
    command line easier to read (for a human) but is sometimes disadvantageous,
    especially in autogenerated menus, since the delimiter in question cannot
    occur in the menu item text. (See also "EXAMPLES" below.)


**-D**, **--display** *DISPLAYNAME*
:   Use the X display DISPLAYNAME, instead of the default display. Normally you
    won't need to use this.


**--foreground** *FGCOLOR*  (X resource: **foreground**)
:   Set the foreground color to FGCOLOR. By default, the foreground color is
    black. FGCOLOR may be the name of any color accepted by your X server.


**-F**, **--font** *FONTNAME*  (X resource: **font**)
:   Use the font FONTNAME instead of the default font.


**-h**, **--help**
:   Output a brief help message.

**--mouse**  (X resource: **mouse**)

**--no-mouse**
:   Enable/disable mouse support in **vmenu**. The mouse support is quite
    limited (you can't scroll a large menu using the mouse) and is only intended
    for those moments when you instinctively want to click on something you see
    in order to select it. See also MOUSE SUPPORT.

    Use vmenu.mouse: false (or `no' or `off') in your X resource file to
    disable mouse support as a default, and vmenu.mouse: true (or `yes' or
    `on) to enable it.


**-i**, **--item** *POSITION*
:   Pre-select menu item number POSITION, instead of the first menu item, upon
    opening the menu. Menu items are numbered from 1. This is sometimes useful
    in scripts.

    If POSITION is 0, then no item is selected initially. Going up one item will
    make the menu jump to the last item, going down will jump to the first item.
    Pressing enter while no item is selected is the same as aborting. There is
    no way to zero entries, other than this, so if you move about you cannot
    return to the state where no item is selected (but why should you ever want
    that?).

    The described behavior is useful when the initially selected item denotes a
    `current' value (useful when called from a script) and the absence of a
    selected item may be used to indicate that there is no such `current' value.


**-p**, **--print**
:   Prints the COMMAND associated with the selected MENUITEM on standard output
    instead of running it.

    Using this option you can use a menu for all kinds of selections, and not
    only for running a program. When using this option COMMAND no longer need to
    be a valid command at all -- any string will work. See also "EXAMPLES"
    below.


**-o**, **--scroll-offset** *ITEMS*  (X resource: **scrollOffset**)
:   If a menu is too large to fit in one window, it will become scrollable.
    **vmenu** will try to keep at least ITEMS number of items between the
    current position and the top or bottom of the menu. If you get closer than
    this, the menu will scroll. As you get close to the top or bottom of the
    menu scrolling will cease. (Default scroll offset is 3.)

    Scroll offset may not be larger than half of the menu. If it is it will be
    cut down to that value.


**-S**, **--shell** *PROG*
:   Use *PROG* as the shell to run commands, instead of **/bin/sh**. A popular
    alternative shell is rc(1). If the shell cannot be executed, **vmenu** will
    silently fall back to using **/bin/sh**.


**-t**, **--title** *NAME*
:   Change the title of the menu window to NAME. The default title is the last
    component of the path used to run **vmenu**, typically, "vmenu".


**--unfocus-exit**  (X resource: **unfocusExit**)

**--no-unfocus-exit**
:   FIXME: Currently a `BadWindow' error message is generated by X when the
    current instance of **vmenu** dies of unfocus. Does anyone know how to fix
    this?

    **--unfocus-exit** causes **vmenu** to die (without any option being
    selected) if its window loses focus (it's probably not a good to use in
    combination with a window manager that automatically focuses the window
    under your pointer).

    **--no-unfocus-exit** makes **vmenu** survive unfocusing. This can be
    confusing in some cases as it makes it possible to have start several menus
    at once (normally the previous menu would die from unfocus).

    Use vmenu.unfocusExit: false (or `no' or `off') in your X resource file
    to disable unfocus deaths as a default, and vmenu.unfocusExit: true (or
    `yes' or `on) to enable it.


**-V**, **--version**
:   This option prints the version of vmenu on the standard output, and then
    exits with an exit value of zero.


# KEYSTROKES

The **Up** keystrokes move the selection to the next item up. The **Down**
keystrokes move the selection to the next item down. When the selection reaches
the top or bottom, it scrolls around to the other side on pressing of the
appropriate keystroke. The **Select** keystrokes execute the command
corresponding to the currently selected menu item, and exit vmenu. The
**Back** keystrokes does nothing unless the **--back** option was used, in which
case it will run the command specified by that option and exit vmenu. The
**Exit** keystrokes quit vmenu without doing anything.

    Up                  "k", Up_arrow, BackSpace, "-"
    Down                "j", Down_arrow, Space, Tab, "+"
    Select              "l", Right_arrow, Return
    Back                "h", Left_arrow
    Exit                "q", Escape
    Half page down      CTRL-D
    Half page up        CTRL-U
    One page down       CTRL-F
    One page up         CTRL-B
    First entry         "g"
    Last entry          "G"
    Top line            "H"
    Middle line         "M"
    Bottom line         "L"


# MOUSE SUPPORT

**vmenu** implements limited support for the rodent, you may select an item
(left), go to any previous menu, given by **--back**, (right) or abort the menu
(any other; usually middle). The mouse cannot be used to scroll the menu.

Your rodent won't interfere with the normal operation. If you place the pointer
on the menu by mistake, simply move it outside of the menu to restore the
selection. You may, however, use the keys to manipulate an entry selected with
the mouse, in this case the key based selection sticks.

Actions are performed upon releasing a mouse button. To cancel an action after
the button has been pressed, move it outside the menu window and release the
button (this goes for all the buttons).


# EXAMPLES

Prompt a program to execute:

        vmenu "firefox" firefox "terminal" urxvt "gimp" gimp

equivalent to:

        vmenu -d: "firefox":firefox "terminal":urxvt "gimp":gimp

## Shell scripts

You can prompt for options in shell scripts using **vmenu** like this:

    choice=`vmenu -pd: Accept Cancel Ignore`

Now any of the options selected will be put into the variable
*$choice* (note, though, that this may also be empty if the user cancelled the
menu). Here **-p** option is used to print the selected COMMAND
to standard out instead of running it, and **-d** is used
simply to avoid having to fill out the command line with a lot of ugly *""*
arguments. You could, of course, replace the colon in the command line with
any character that you don't use in the menu.

A dynamic menu can be generated like this:

        vmenu_cmd="vmenu --title menu -pd: "
        for i in `seq 10`
        do
            vmenu_cmd+="option $1"
        done
        selected_option=`eval $vmenu_cmd`

This will generate a menu with 10 options of the form *option X*; the selected
one will be available in the *selected_option* variable.


# SEE ALSO

*/etc/X11/rgb.txt* where you may find the names of appropriate colours to use
with the **--background** and **--forground** options and X resources.


# AUTHORS

The initial idea for this program was by Arnold Robbins, after having worked
with John Mackin's GWM Blit emulation. Matty Farrow wrote a version using
libXg, from which some ideas were borrowed. The ratmen code was written by David
Hogan and Arnold Robbins. Rich Salz motivated the **-shell** option. Jonathan
Walther modified this code to play nicely with the ratpoison window manager by
removing handling of mouse events and iconification. The **vmenu** fork was
created to clean some code and add vi-like movements and extra functionality.

Zrajm C Akfogh <vmenu-mail@klingonska.org> changed command line syntax into
the more standard getopts, added scrolling capacity if menu is to large to fit
all at once, added **--delimiter**, **--item**, **--print**, **--scroll-offset**
and **--unfocus-exit** options and X resource support.

**vmenu** makes reference to 'vi-like' as it tries to be more natural for vi
users. Is heavily derived from ratmen, which is derived from ratmenu.
